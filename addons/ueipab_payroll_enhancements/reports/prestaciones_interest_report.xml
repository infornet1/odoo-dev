<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Prestaciones Sociales Interest Report Template -->

    <template id="prestaciones_interest">
        <t t-call="web.html_container">
            <t t-foreach="reports" t-as="report_data">
                <t t-call="web.basic_layout">
                    <div class="page" style="font-size: 7pt;">
                        <!-- Report Header -->
                        <div style="text-align: center; margin-bottom: 5px;">
                            <h3 style="margin: 0; padding: 0; font-size: 10pt;"><strong>PRESTACIONES SOCIALES E INTERESES</strong></h3>
                            <p style="margin: 2px 0 0 0; font-size: 7pt; color: #666;">Detalle Mensual de Acumulación</p>
                        </div>

                        <!-- Employee Information -->
                        <table class="table table-sm table-bordered" style="margin-bottom: 5px; font-size: 7pt;">
                            <tr>
                                <td style="width: 20%; background-color: #f8f9fa;"><strong>Empleado:</strong></td>
                                <td style="width: 30%;"><span t-esc="report_data.get('employee').name"/></td>
                                <td style="width: 20%; background-color: #f8f9fa;"><strong>Cédula:</strong></td>
                                <td style="width: 30%;"><span t-esc="report_data.get('employee').identification_id"/></td>
                            </tr>
                            <tr>
                                <td style="background-color: #f8f9fa;"><strong>Inicio Contrato:</strong></td>
                                <td><span t-esc="report_data.get('contract').date_start"/></td>
                                <td style="background-color: #f8f9fa;"><strong>Fecha Liquidación:</strong></td>
                                <td><span t-esc="report_data.get('payslip').date_to"/></td>
                            </tr>
                            <tr>
                                <td style="background-color: #f8f9fa;"><strong>Moneda:</strong></td>
                                <td colspan="3"><span t-esc="report_data.get('currency').name"/></td>
                            </tr>
                        </table>

                        <!-- Monthly Breakdown Table -->
                        <div class="row">
                            <div class="col-12">
                                <table class="table table-sm table-bordered" style="font-size: 6.5pt;">
                                    <thead style="background-color: #e9ecef;">
                                        <tr>
                                            <th class="text-center" style="width: 12%;">Mes a<br/>Calcular</th>
                                            <th class="text-right" style="width: 10%;">Salario<br/>Integral</th>
                                            <th class="text-center" style="width: 8%;">Días x<br/>Mes</th>
                                            <th class="text-right" style="width: 15%;">Prestaciones<br/>del Mes</th>
                                            <th class="text-right" style="width: 15%;">Acumulado de<br/>Prestaciones</th>
                                            <th class="text-right" style="width: 10%;">Tasa<br/>del Mes</th>
                                            <th class="text-right" style="width: 15%;">Intereses<br/>Del Mes</th>
                                            <th class="text-right" style="width: 15%;">Intereses<br/>Ganados</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="report_data.get('monthly_data', [])" t-as="month">
                                            <tr>
                                                <!-- Month -->
                                                <td class="text-left"><span t-esc="month.get('month_name')"/></td>

                                                <!-- Integral Salary (daily) -->
                                                <td class="text-right">
                                                    <span t-esc="report_data.get('currency').symbol"/><span t-esc="'{:,.2f}'.format(month.get('integral_salary', 0))"/>
                                                </td>

                                                <!-- Days deposited -->
                                                <td class="text-center">
                                                    <span t-esc="month.get('deposit_days', 0)"/>
                                                </td>

                                                <!-- Prestaciones del Mes -->
                                                <td class="text-right">
                                                    <span t-esc="report_data.get('currency').symbol"/><span t-esc="'{:,.2f}'.format(month.get('deposit_amount', 0))"/>
                                                </td>

                                                <!-- Accumulated Prestaciones -->
                                                <td class="text-right">
                                                    <strong><span t-esc="report_data.get('currency').symbol"/><span t-esc="'{:,.2f}'.format(month.get('accumulated_prestaciones', 0))"/></strong>
                                                </td>

                                                <!-- Exchange Rate -->
                                                <td class="text-right">
                                                    <span t-esc="'{:,.2f}'.format(month.get('exchange_rate', 1.0))"/>
                                                </td>

                                                <!-- Monthly Interest -->
                                                <td class="text-right">
                                                    <span t-esc="report_data.get('currency').symbol"/><span t-esc="'{:,.2f}'.format(month.get('month_interest', 0))"/>
                                                </td>

                                                <!-- Accumulated Interest -->
                                                <td class="text-right">
                                                    <strong><span t-esc="report_data.get('currency').symbol"/><span t-esc="'{:,.2f}'.format(month.get('accumulated_interest', 0))"/></strong>
                                                </td>
                                            </tr>
                                        </t>

                                        <!-- Totals Row -->
                                        <tr style="background-color: #f8f9fa; font-weight: bold;">
                                            <td class="text-left">Total por Emp.:</td>
                                            <td></td>
                                            <td class="text-center">
                                                <span t-esc="report_data.get('totals', {}).get('total_days', 0)"/>
                                            </td>
                                            <td></td>
                                            <td class="text-right">
                                                <span t-esc="report_data.get('currency').symbol"/><span t-esc="'{:,.2f}'.format(report_data.get('totals', {}).get('total_prestaciones', 0))"/>
                                            </td>
                                            <td></td>
                                            <td></td>
                                            <td class="text-right">
                                                <span t-esc="report_data.get('currency').symbol"/><span t-esc="'{:,.2f}'.format(report_data.get('totals', {}).get('total_interest', 0))"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Report Footer Notes -->
                        <div style="margin-top: 5px; font-size: 6pt; color: #666; padding: 3px; background-color: #f8f9fa; border-left: 2px solid #2196F3;">
                            <strong>Notas:</strong>
                            Prestaciones: 15 días cada 3 meses •
                            Intereses: 13% anual sobre saldo promedio •
                            Salario Integral incluye proporcional de utilidades y bono vacacional •
                            Tasa representa tipo de cambio aplicable
                        </div>

                    </div>

                    <!-- Page break between reports -->
                    <t t-if="not report_data_last">
                        <p style="page-break-after: always;"/>
                    </t>
                </t>
            </t>
        </t>
    </template>

</odoo>
