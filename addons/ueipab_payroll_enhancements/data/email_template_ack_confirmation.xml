<?xml version="1.0" encoding="utf-8"?>
<odoo noupdate="1">
    <!-- Acknowledgment Confirmation Email Template -->
    <record id="email_template_payslip_ack_confirmation" model="mail.template">
        <field name="name">Payslip Ack Confirmation</field>
        <field name="model_id" ref="hr_payroll_community.model_hr_payslip"/>
        <!-- Jinja2 for headers -->
        <field name="email_from">"Recursos Humanos" &lt;recursoshumanos@ueipab.edu.ve&gt;</field>
        <field name="email_to">{{object.employee_id.work_email}}</field>
        <field name="email_cc">recursoshumanos@ueipab.edu.ve</field>
        <field name="subject">{{object.number}} ha sido confirmado exitosamente</field>

        <!-- QWeb ONLY for body_html -->
        <field name="body_html" type="html">
            <div style="font-family:Arial,sans-serif;max-width:600px;margin:0 auto;padding:20px;background:#f9f9f9">
                <div style="background:white;padding:30px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1)">
                    <!-- Company Logo -->
                    <t t-set="base_url" t-value="object.env['ir.config_parameter'].sudo().get_param('web.base.url')"/>
                    <div style="text-align:center;margin-bottom:20px">
                        <img t-att-src="base_url + '/ueipab_payroll_enhancements/static/img/ueipab_logo.png'" style="max-height:80px" alt="UEIPAB"/>
                    </div>

                    <!-- Header with success icon -->
                    <div style="text-align:center;margin-bottom:25px">
                        <div style="display:inline-block;background:linear-gradient(135deg,#4caf50 0%,#388e3c 100%);color:white;padding:15px 25px;border-radius:8px;font-size:18px;font-weight:bold">
                            Confirmacion Registrada
                        </div>
                    </div>

                    <p style="font-size:16px;color:#333;margin-bottom:20px">
                        Estimado/a <strong t-out="object.employee_id.name"/>,
                    </p>

                    <p style="font-size:15px;color:#555;line-height:1.6;margin-bottom:20px">
                        Le confirmamos que su comprobante de pago ha sido <strong>confirmado exitosamente</strong> en nuestro sistema.
                    </p>

                    <!-- Payslip Info Box -->
                    <div style="background:#e8f5e9;padding:20px;border-left:4px solid #4caf50;margin:25px 0;border-radius:4px">
                        <p style="font-size:14px;color:#333;margin:5px 0">
                            <strong>Comprobante:</strong> <t t-out="object.number"/>
                        </p>
                        <p style="font-size:14px;color:#333;margin:5px 0">
                            <strong>Empleado:</strong> <t t-out="object.employee_id.name"/>
                        </p>
                        <p style="font-size:14px;color:#333;margin:5px 0">
                            <strong>Cedula:</strong> <t t-out="object.employee_id.identification_id or '-'"/>
                        </p>
                        <p style="font-size:14px;color:#333;margin:5px 0">
                            <strong>Periodo:</strong>
                            <t t-out="object.date_from" t-options='{"widget": "date"}'/> -
                            <t t-out="object.date_to" t-options='{"widget": "date"}'/>
                        </p>
                        <t t-if="object.payslip_run_id">
                            <p style="font-size:14px;color:#333;margin:5px 0">
                                <strong>Lote:</strong> <t t-out="object.payslip_run_id.name"/>
                            </p>
                        </t>
                        <t t-set="net_usd" t-value="object.get_net_amount()"/>
                        <t t-set="rate" t-value="object.exchange_rate_used or 1.0"/>
                        <t t-set="net_ves" t-value="net_usd * rate"/>
                        <hr style="margin:12px 0;border:none;border-top:1px solid #c8e6c9"/>
                        <p style="font-size:14px;color:#333;margin:5px 0">
                            <strong>Monto Neto (USD):</strong> <t t-out="'${:,.2f}'.format(net_usd)"/>
                        </p>
                        <p style="font-size:14px;color:#333;margin:5px 0">
                            <strong>Tasa de Cambio:</strong> <t t-out="'{:,.4f}'.format(rate)"/> Bs/USD
                        </p>
                        <p style="font-size:15px;color:#2e7d32;margin:8px 0 0 0;font-weight:bold">
                            <strong>Monto Neto (Bs.):</strong> Bs. <t t-out="'{:,.2f}'.format(net_ves)"/>
                        </p>
                    </div>

                    <!-- Audit Trail Box -->
                    <div style="background:#f5f5f5;padding:20px;border-left:4px solid #9e9e9e;margin:25px 0;border-radius:4px">
                        <p style="font-size:13px;color:#555;margin:0 0 10px 0;font-weight:bold;text-transform:uppercase;letter-spacing:0.5px">
                            Datos de Confirmacion Digital
                        </p>
                        <t t-if="object.acknowledged_date">
                            <p style="font-size:13px;color:#333;margin:4px 0">
                                <strong>Fecha y hora (VET):</strong> <t t-out="object.get_ack_timestamp_vet()"/>
                            </p>
                        </t>
                        <t t-if="object.acknowledged_ip">
                            <p style="font-size:13px;color:#333;margin:4px 0">
                                <strong>Direccion IP:</strong> <t t-out="object.acknowledged_ip"/>
                            </p>
                        </t>
                        <t t-if="object.acknowledged_user_agent">
                            <p style="font-size:12px;color:#666;margin:4px 0;word-break:break-all">
                                <strong>Navegador:</strong> <t t-out="object.acknowledged_user_agent"/>
                            </p>
                        </t>
                    </div>

                    <p style="font-size:14px;color:#555;line-height:1.6;margin:20px 0">
                        Este correo electrónico es una constancia de que usted confirmó la recepción y revisión de su comprobante de pago de forma digital. No es necesario realizar ninguna acción adicional.
                    </p>

                    <div style="background:#e3f2fd;padding:15px;border-radius:4px;margin:25px 0">
                        <p style="font-size:13px;color:#1565c0;margin:0;text-align:center">
                            <strong>Tiene alguna duda?</strong><br/>
                            Escriba a <a href="mailto:recursoshumanos@ueipab.edu.ve" style="color:#1565c0">recursoshumanos@ueipab.edu.ve</a>
                        </p>
                    </div>

                    <div style="margin-top:30px;padding-top:20px;border-top:1px solid #e0e0e0">
                        <p style="font-size:15px;color:#333;margin:5px 0">Cordialmente,</p>
                        <p style="font-size:15px;color:#333;margin:5px 0"><strong>Recursos Humanos</strong></p>
                        <t t-set="company" t-value="object.company_id"/>
                        <p style="font-size:14px;color:#555;margin:5px 0"><t t-out="company.name"/></p>
                        <p style="font-size:13px;color:#888;margin:3px 0">
                            <t t-if="company.vat">RIF: <t t-out="company.vat"/></t>
                        </p>
                        <p style="font-size:13px;color:#888;margin:3px 0">
                            <t t-out="company.street or ''"/>
                            <t t-if="company.city">, <t t-out="company.city"/></t>
                            <t t-if="company.state_id"> - <t t-out="company.state_id.name"/></t>
                            <t t-if="company.zip">, <t t-out="company.zip"/></t>
                        </p>
                        <p style="font-size:13px;color:#888;margin:3px 0">
                            <t t-if="company.phone">Tel: <t t-out="company.phone"/></t>
                            <t t-if="company.phone and company.website"> | </t>
                            <t t-if="company.website"><t t-out="company.website"/></t>
                        </p>
                    </div>
                </div>
            </div>
        </field>
    </record>
</odoo>
